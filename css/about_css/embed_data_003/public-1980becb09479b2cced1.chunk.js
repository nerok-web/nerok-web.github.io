(window.webpackJsonp=window.webpackJsonp||[]).push([[148],{532:function(e,t){document.addEventListener("DOMContentLoaded",(function(){var e=0,t=function(){return(new Date).getTime()+e++},n=function(e){return"["+e+"]$1"},o=function(e){return"_"+e+"_$1"},a=function(e,a){e.preventDefault(),e.stopPropagation();var r=a,s=r.getAttribute("data-association"),i=r.getAttribute("data-associations"),c=r.getAttribute("data-association-insertion-template"),d=r.getAttribute("data-association-insertion-method")||r.getAttribute("data-association-insertion-position")||"before",l=r.getAttribute("data-association-insertion-node"),u=r.getAttribute("data-association-insertion-traversal"),m=parseInt(r.getAttribute("data-count"),10),p=new RegExp("\\[new_"+s+"\\](.*?\\s)","g"),g=new RegExp("_new_"+s+"_(\\w*)","g"),f=t(),h=c.replace(p,n(f)),_=[],w=e;for(h===c&&(p=new RegExp("\\[new_"+i+"\\](.*?\\s)","g"),g=new RegExp("_new_"+i+"_(\\w*)","g"),h=c.replace(p,n(f))),_=[h=h.replace(g,o(f))],m=isNaN(m)?1:Math.max(m,1),m-=1;m;)f=t(),h=(h=c.replace(p,n(f))).replace(g,o(f)),_.push(h),m-=1;var v=function(e,t,n){return e?"function"==typeof e?(t&&console.warn("association-insertion-traversal is ignored, because association-insertion-node is given as a function."),e(n)):"string"==typeof e?t?n[t](e):"this"===e?n:document.querySelector(e):void 0:n.parentNode}(l,u,r);v&&0!==v.length||console.warn("Couldn't find the element to insert the template. Make sure your `data-association-insertion-*` on `link_to_add_association` is correct."),_.forEach((function(e,t){var n=e,o=new CustomEvent("cocoon:before-insert",{bubbles:!0,cancelable:!0,detail:[n,w]});if(v.dispatchEvent(o),!o.defaultPrevented){var a={before:"beforebegin",prepend:"afterbegin",append:"beforeend",after:"afterend"},r=a[d],s=v.insertAdjacentHTML(r,n);r===a.before?s=v.previousElementSibling:r===a.prepend?s=v.firstElementChild:r===a.append?s=v.lastElementChild:r===a.after&&(s=v.nextElementSibling);var i=new CustomEvent("cocoon:after-insert",{bubbles:!0,detail:[n,w,s]});v.dispatchEvent(i)}}))},r=function(e,t){var n=t,o=n.getAttribute("data-wrapper-class")||"nested-fields",a=n.closest("."+o),r=a.parentNode,s=e;e.preventDefault(),e.stopPropagation();var i=new CustomEvent("cocoon:before-remove",{bubbles:!0,cancelable:!0,detail:[a,s]});if(r.dispatchEvent(i),!i.defaultPrevented){var c=r.getAttribute("data-remove-timeout")||0;setTimeout((function(){var e;n.classList.contains("dynamic")?(e=a).parentElement.removeChild(e):((function(e,t){var n=e.previousElementSibling;if(!t)return n;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}(n,"input[type=hidden]")).value="1",a.style.display="none");var t=new CustomEvent("cocoon:after-remove",{bubbles:!0,detail:[a,s]});r.dispatchEvent(t)}),c)}};document.addEventListener("click",(function(e){for(var t=e.target;t&&t!==this;t=t.parentNode){if(t.matches(".add_fields"))return void a(e,t);if(t.matches(".remove_fields"))return void r(e,t)}}),!1)}))},744:function(e,t,n){"use strict";n.r(t);var o=n(0),a=(n(118),n(77)),r=n.n(a),s=n(101),i=n(55),c=n(102);n(532);Object(c.a)(),window.addEventListener("message",(e=>{const t=e.data||{};window.parent&&"setHeight"===t.type&&Object(i.default)((()=>{window.parent.postMessage({type:"setHeight",id:t.id,height:document.getElementsByTagName("html")[0].scrollHeight},"*")}))})),Object(s.a)().then((function(){const e=n(64).default,{timeAgoString:t}=n(72),{delegate:a}=n(38),s=n(43).default,{getLocale:c}=n(5),{messages:d}=c(),l=(n(1),n(33)),{createBrowserHistory:u}=n(191),m=()=>{const e=u(),t=document.querySelectorAll(".public-layout .detailed-status"),n=e.location;1!==t.length||n.state&&n.state.scrolledToDetailedStatus||(t[0].scrollIntoView(),e.replace(n.pathname,{...n.state,scrolledToDetailedStatus:!0}))},p=e=>t=>{let{target:n}=t;n.src=n.getAttribute(e)};Object(i.default)((()=>{const r=document.documentElement.lang,i=new Intl.DateTimeFormat(r,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"});[].forEach.call(document.querySelectorAll(".emojify"),(e=>{e.innerHTML=s(e.innerHTML)})),[].forEach.call(document.querySelectorAll("time.formatted"),(e=>{const t=new Date(e.getAttribute("datetime")),n=i.format(t);e.title=n,e.textContent=n})),[].forEach.call(document.querySelectorAll("time.time-ago"),(n=>{const o=new Date(n.getAttribute("datetime")),a=new Date;n.title=i.format(o),n.textContent=t({formatMessage:(t,n)=>{let{id:o,defaultMessage:a}=t;return new e(d[o]||a,r).format(n)},formatDate:(e,t)=>new Intl.DateTimeFormat(r,t).format(e)},o,a,a.getFullYear(),n.getAttribute("datetime").includes("T"))}));const c=document.querySelectorAll("[data-component]");c.length>0?n.e(10).then(n.bind(null,1087)).then((e=>{let{default:t}=e;[].forEach.call(c,(e=>{[].forEach.call(e.children,(t=>{e.removeChild(t)}))}));const n=document.createElement("div");l.render(Object(o.a)(t,{locale:r,components:c}),n),document.body.appendChild(n),m()})).catch((e=>{console.error(e),m()})):m(),a(document,"#registration_user_password_confirmation,#registration_user_password","input",(()=>{const t=document.getElementById("registration_user_password"),n=document.getElementById("registration_user_password_confirmation");n.value&&n.value.length>t.maxLength?n.setCustomValidity(new e(d["password_confirmation.exceeds_maxlength"]||"Password confirmation exceeds the maximum password length",r).format()):t.value&&t.value!==n.value?n.setCustomValidity(new e(d["password_confirmation.mismatching"]||"Password confirmation does not match",r).format()):n.setCustomValidity("")})),a(document,"#user_password,#user_password_confirmation","input",(()=>{const t=document.getElementById("user_password"),n=document.getElementById("user_password_confirmation");n&&(n.value&&n.value.length>t.maxLength?n.setCustomValidity(new e(d["password_confirmation.exceeds_maxlength"]||"Password confirmation exceeds the maximum password length",r).format()):t.value&&t.value!==n.value?n.setCustomValidity(new e(d["password_confirmation.mismatching"]||"Password confirmation does not match",r).format()):n.setCustomValidity(""))})),a(document,".custom-emoji","mouseover",p("data-original")),a(document,".custom-emoji","mouseout",p("data-static")),a(document,".status__content__spoiler-link","click",(function(){const t=this.parentNode.parentNode;return"expanded"===t.dataset.spoiler?(t.dataset.spoiler="folded",this.textContent=new e(d["status.show_more"]||"Show more",r).format()):(t.dataset.spoiler="expanded",this.textContent=new e(d["status.show_less"]||"Show less",r).format()),!1})),[].forEach.call(document.querySelectorAll(".status__content__spoiler-link"),(t=>{const n="expanded"===t.parentNode.parentNode.dataset.spoiler?d["status.show_less"]||"Show less":d["status.show_more"]||"Show more";t.textContent=new e(n,r).format()}))})),a(document,"#account_display_name","input",(e=>{let{target:t}=e;const n=document.querySelector(".card .display-name strong");n&&(t.value?n.innerHTML=s(r()(t.value)):n.textContent=t.dataset.default)})),a(document,"#account_avatar","change",(e=>{let{target:t}=e;const n=document.querySelector(".card .avatar img"),[o]=t.files||[],a=o?URL.createObjectURL(o):n.dataset.originalSrc;n.src=a}));const g=e=>t=>{let{target:n}=t;const o=n.getAttribute(e);"true"!==n.getAttribute("data-autoplay")&&n.src!==o&&(n.src=o)};a(document,"img#profile_page_avatar","mouseover",g("data-original")),a(document,"img#profile_page_avatar","mouseout",g("data-static")),a(document,"#account_header","change",(e=>{let{target:t}=e;const n=document.querySelector(".card .card__img img"),[o]=t.files||[],a=o?URL.createObjectURL(o):n.dataset.originalSrc;n.src=a})),a(document,"#account_locked","change",(e=>{let{target:t}=e;const n=document.querySelector(".card .display-name i");n&&(t.checked?delete n.dataset.hidden:n.dataset.hidden="true")})),a(document,".input-copy input","click",(e=>{let{target:t}=e;t.focus(),t.select(),t.setSelectionRange(0,t.value.length)})),a(document,".input-copy button","click",(e=>{let{target:t}=e;const n=t.parentNode.querySelector(".input-copy__wrapper input"),o=n.readonly;n.readonly=!1,n.focus(),n.select(),n.setSelectionRange(0,n.value.length);try{document.execCommand("copy")&&(n.blur(),t.parentNode.classList.add("copied"),setTimeout((()=>{t.parentNode.classList.remove("copied")}),700))}catch(e){console.error(e)}n.readonly=o}));const f=()=>{const e=document.querySelector(".sidebar ul"),t=document.querySelector(".sidebar__toggle__icon");e.classList.contains("visible")?(document.body.style.overflow=null,t.setAttribute("aria-expanded",!1)):(document.body.style.overflow="hidden",t.setAttribute("aria-expanded",!0)),t.classList.toggle("active"),e.classList.toggle("visible")};a(document,".sidebar__toggle__icon","click",(()=>{f()})),a(document,".sidebar__toggle__icon","keydown",(e=>{" "!==e.key&&"Enter"!==e.key||(e.preventDefault(),f())})),a(document,"#registration_new_user,#new_user","submit",(()=>{["user_website","user_confirm_password","registration_user_website","registration_user_confirm_password"].forEach((e=>{const t=document.getElementById(e);t&&(t.value="")}))}))})).then((function(){return/KAIOS/.test(navigator.userAgent)?n.e(8).then(n.bind(null,1088)).then((e=>{e.register()})):Promise.resolve()})).catch((e=>{console.error(e)}))}},[[744,0]]]);
//# sourceMappingURL=public-1980becb09479b2cced1.chunk.js.map